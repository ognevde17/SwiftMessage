# Тесты для проекта SwiftMessage

## Обзор тестов

В данной директории находятся тесты для проекта SwiftMessage, созданные с использованием фреймворка Google Test. Структура тестов разбита на следующие группы:

1. **messages_test.cpp** - тесты для классов сообщений из папки `include/common/messages.hpp`.
   - Проверяет сериализацию и десериализацию сообщений
   - Проверяет корректность работы базовых функций сообщений

2. **database_manager_test.cpp** - тесты для менеджера базы данных `DatabaseManager`.
   - Использует моки для имитации работы с базой данных PostgreSQL
   - Проверяет функции для работы с пользователями, чатами и сообщениями

3. **request_manager_test.cpp** - тесты для менеджера запросов `RequestManager`.
   - Тестирует обработку запросов регистрации, авторизации и отправки сообщений
   - Использует моки для имитации сетевого взаимодействия

## Инструкция по настройке и запуску

### Требования

- Компилятор с поддержкой C++20
- CMake 3.10+
- Boost 1.87.0
- PostgreSQL

### Сборка тестов

1. Создайте директорию build в корне проекта, если она не существует:
   ```bash
   mkdir -p build
   cd build
   ```

2. Настройте сборку проекта с включенными тестами:
   ```bash
   cmake .. -DBUILD_TESTING=ON
   ```

3. Выполните сборку:
   ```bash
   cmake --build .
   ```

### Запуск тестов

После сборки вы можете запустить тесты непосредственно из директории build:

```bash
cd build
./google_tests/messages_test
./google_tests/database_manager_test
./google_tests/request_manager_test
```

Либо использовать CTest для запуска всех тестов:

```bash
ctest
```

## Структура моков

Для тестирования используются следующие моки:

1. **MockDatabaseManager** - имитирует работу с базой данных без необходимости реального подключения.
2. **MockConnectionManager** - имитирует сетевое взаимодействие для тестирования RequestManager.

Эти моки позволяют тестировать функционал приложения изолированно, без зависимости от внешних систем. 